# insert_bangla_products.py

import os
import django
import sys

# Django setup
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'config.settings')
django.setup()

from ecommerce.models import Product, Category
from django.utils.text import slugify

def create_categories():
    """Create categories if they don't exist"""
    categories_data = [
        {'name': 'ржмрж╛ржжрж╛ржо', 'slug': 'nuts'},
        {'name': 'рж╢рзБржХржирзЛ ржлрж▓', 'slug': 'dry-fruits'},
        {'name': 'ржорж╕рж▓рж╛', 'slug': 'spices'},
        {'name': 'ржЪрж╛ ржУ ржХржлрж┐', 'slug': 'tea-coffee'},
        {'name': 'рж╕рзНржирзНржпрж╛ржХрж╕', 'slug': 'snacks'},
    ]
    
    for cat_data in categories_data:
        category, created = Category.objects.get_or_create(
            slug=cat_data['slug'],
            defaults={
                'name': cat_data['name'],
                'serial': categories_data.index(cat_data),
                'is_active': True
            }
        )
        if created:
            print(f'Created category: {category.name}')

def insert_bangla_products():
    """Insert Bengali product data"""
    
    products_data = [
        {
            'name': 'ржХрж╛ржЬрзБ ржмрж╛ржжрж╛ржо',
            'slug': 'cashew-nuts',
            'description': 'ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржХрзЛржпрж╝рж╛рж▓рж┐ржЯрж┐рж░ рждрж╛ржЬрж╛ ржХрж╛ржЬрзБ ржмрж╛ржжрж╛ржо, рж╕рзНржмрж╛рж╕рзНржерзНржпрзЗрж░ ржЬржирзНржп ржЕрждрзНржпржирзНржд ржЙржкржХрж╛рж░рзАред ржкрзНрж░рзЛржЯрж┐ржи, ржнрж┐ржЯрж╛ржорж┐ржи ржПржмржВ ржорж┐ржирж╛рж░рзЗрж▓рзЗ ржнрж░ржкрзБрж░ред',
            'price': 1200.00,
            'discount_price': 999.00,
            'category_slug': 'nuts',
            'stock': 50,
            'short_description': 'рждрж╛ржЬрж╛ ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржХрж╛ржЬрзБ ржмрж╛ржжрж╛ржо',
            'features': 'рззрзжрзж% ржЕрж░рзНржЧрж╛ржирж┐ржХ\nржнрж┐ржЯрж╛ржорж┐ржи ржЗ рж╕ржорзГржжрзНржз\nржХрзЛрж▓рзЗрж╕рзНржЯрзЗрж░рж▓ ржорзБржХрзНржд\nржкрзНрж░рзЛржЯрж┐ржирзЗрж░ ржнрж╛рж▓рзЛ ржЙрзОрж╕',
            'brand': 'ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржирж╛ржЯрж╕',
            'weight': 'рзлрзжрзж ржЧрзНрж░рж╛ржо',
        },
        {
            'name': 'ржХрж┐рж╕ржорж┐рж╕',
            'slug': 'raisins',
            'description': 'рж╕рзБржЧржирзНржзрж┐ ржУ ржорж┐рж╖рзНржЯрж┐ ржХрж┐рж╕ржорж┐рж╕, рж░рж╛ржирзНржирж╛ ржПржмржВ рж╕рзНржирзНржпрж╛ржХрж╕ рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржЬржирзНржп ржЙржкржпрзБржХрзНрждред ржЖржпрж╝рж░ржи ржПржмржВ ржлрж╛ржЗржмрж╛рж░ рж╕ржорзГржжрзНржзред',
            'price': 450.00,
            'discount_price': 399.00,
            'category_slug': 'dry-fruits',
            'stock': 100,
            'short_description': 'рж╕рзБржЧржирзНржзрж┐ ржорж┐рж╖рзНржЯрж┐ ржХрж┐рж╕ржорж┐рж╕',
            'features': 'ржкрзНрж░рж╛ржХрзГрждрж┐ржХ ржорж┐рж╖рзНржЯрж┐\nржЖржпрж╝рж░ржи рж╕ржорзГржжрзНржз\nржПржирж╛рж░рзНржЬрж┐ ржмрзБрж╕рзНржЯрж╛рж░\nржХрзЛрж▓рзЗрж╕рзНржЯрзЗрж░рж▓ ржорзБржХрзНржд',
            'brand': 'ржлрзНрж░рзЗрж╢ ржлрзНрж░рзБржЯрж╕',
            'weight': 'рзирзлрзж ржЧрзНрж░рж╛ржо',
        },
        {
            'name': 'ржЖржЦрж░рзЛржЯ',
            'slug': 'walnuts',
            'description': 'рждрж╛ржЬрж╛ ржЖржЦрж░рзЛржЯ ржУржорзЗржЧрж╛-рзй ржлрзНржпрж╛ржЯрж┐ ржЕрзНржпрж╛рж╕рж┐ржб рж╕ржорзГржжрзНржз, ржорж╕рзНрждрж┐рж╖рзНржХрзЗрж░ рж╕рзНржмрж╛рж╕рзНржерзНржпрзЗрж░ ржЬржирзНржп ржЦрзБржмржЗ ржнрж╛рж▓рзЛред',
            'price': 850.00,
            'discount_price': 749.00,
            'category_slug': 'nuts',
            'stock': 30,
            'short_description': 'ржУржорзЗржЧрж╛-рзй рж╕ржорзГржжрзНржз ржЖржЦрж░рзЛржЯ',
            'features': 'ржУржорзЗржЧрж╛-рзй ржлрзНржпрж╛ржЯрж┐ ржЕрзНржпрж╛рж╕рж┐ржб\nржорж╕рзНрждрж┐рж╖рзНржХрзЗрж░ ржЬржирзНржп ржЙржкржХрж╛рж░рзА\nржЕрзНржпрж╛ржирзНржЯрж┐ржЕржХрзНрж╕рж┐ржбрзЗржирзНржЯ рж╕ржорзГржжрзНржз\nрж╣рж╛рж░рзНржЯрзЗрж░ ржЬржирзНржп ржнрж╛рж▓рзЛ',
            'brand': 'рж╣рзЗрж▓ржерж┐ ржирж╛ржЯрж╕',
            'weight': 'рзирзлрзж ржЧрзНрж░рж╛ржо',
        },
        {
            'name': 'ржмрж╛ржжрж╛ржо',
            'slug': 'almonds',
            'description': 'ржХрзНржпрж╛рж▓рж┐ржлрзЛрж░рзНржирж┐ржпрж╝рж╛ржи ржмрж╛ржжрж╛ржо, ржнрж┐ржЯрж╛ржорж┐ржи ржЗ ржПржмржВ ржкрзНрж░рзЛржЯрж┐ржирзЗ ржнрж░ржкрзБрж░ред рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░ рж╕рзНржирзНржпрж╛ржХрж┐ржВ ржПрж░ ржЬржирзНржп ржЖржжрж░рзНрж╢ред',
            'price': 950.00,
            'discount_price': 799.00,
            'category_slug': 'nuts',
            'stock': 75,
            'short_description': 'ржХрзНржпрж╛рж▓рж┐ржлрзЛрж░рзНржирж┐ржпрж╝рж╛ржи ржмрж╛ржжрж╛ржо',
            'features': 'ржнрж┐ржЯрж╛ржорж┐ржи ржЗ рж╕ржорзГржжрзНржз\nрждрзНржмржХрзЗрж░ ржЬржирзНржп ржнрж╛рж▓рзЛ\nржкрзНрж░рзЛржЯрж┐ржирзЗрж░ ржЙрзОрж╕\nржХрзЛрж▓рзЗрж╕рзНржЯрзЗрж░рж▓ ржорзБржХрзНржд',
            'brand': 'ржХрзНржпрж╛рж▓рж┐ржлрзЛрж░рзНржирж┐ржпрж╝рж╛ ржирж╛ржЯрж╕',
            'weight': 'рзлрзжрзж ржЧрзНрж░рж╛ржо',
        },
        {
            'name': 'ржкрзЗрж╕рзНрждрж╛ ржмрж╛ржжрж╛ржо',
            'slug': 'pista-nuts',
            'description': 'ржЙржЪрзНржЪржорж╛ржирзЗрж░ ржкрзЗрж╕рзНрждрж╛ ржмрж╛ржжрж╛ржо, ржлрж╛ржЗржмрж╛рж░ ржПржмржВ ржкрзНрж░рзЛржЯрж┐ржи рж╕ржорзГржжрзНржзред рж╕рзНржмрж╛ржжрзЗ ржПржмржВ ржкрзБрж╖рзНржЯрж┐рждрзЗ ржЕрждрзБрж▓ржирзАржпрж╝ред',
            'price': 1500.00,
            'discount_price': 1299.00,
            'category_slug': 'nuts',
            'stock': 25,
            'short_description': 'ржЙржЪрзНржЪржорж╛ржирзЗрж░ ржкрзЗрж╕рзНрждрж╛ ржмрж╛ржжрж╛ржо',
            'features': 'ржлрж╛ржЗржмрж╛рж░ рж╕ржорзГржжрзНржз\nржкрзНрж░рзЛржЯрж┐ржирзЗрж░ ржнрж╛рж▓рзЛ ржЙрзОрж╕\nрж╣рж╛рж░рзНржЯрзЗрж░ ржЬржирзНржп ржЙржкржХрж╛рж░рзА\nржЕрзНржпрж╛ржирзНржЯрж┐ржЕржХрзНрж╕рж┐ржбрзЗржирзНржЯ',
            'brand': 'ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржирж╛ржЯрж╕',
            'weight': 'рзирзлрзж ржЧрзНрж░рж╛ржо',
        },
        {
            'name': 'ржЦрзЗржЬрзБрж░',
            'slug': 'dates',
            'description': 'рждрж╛ржЬрж╛ ржорж┐рж╖рзНржЯрж┐ ржЦрзЗржЬрзБрж░, ржкрзНрж░рж╛ржХрзГрждрж┐ржХ рж╢ржХрзНрждрж┐рж░ ржЙрзОрж╕ред ржЖржпрж╝рж░ржи ржПржмржВ ржлрж╛ржЗржмрж╛рж░рзЗ ржнрж░ржкрзБрж░ред',
            'price': 600.00,
            'discount_price': 499.00,
            'category_slug': 'dry-fruits',
            'stock': 60,
            'short_description': 'рждрж╛ржЬрж╛ ржорж┐рж╖рзНржЯрж┐ ржЦрзЗржЬрзБрж░',
            'features': 'ржкрзНрж░рж╛ржХрзГрждрж┐ржХ рж╢ржХрзНрждрж┐рж░ ржЙрзОрж╕\nржЖржпрж╝рж░ржи рж╕ржорзГржжрзНржз\nржлрж╛ржЗржмрж╛рж░рзЗ ржнрж░ржкрзБрж░\nржХрзЛрж▓рзЗрж╕рзНржЯрзЗрж░рж▓ ржорзБржХрзНржд',
            'brand': 'ржбрзЗржЯрж╕ ржХрж┐ржВржбржо',
            'weight': 'рзлрзжрзж ржЧрзНрж░рж╛ржо',
        },
        {
            'name': 'ржЪрж┐ржирж╛ ржмрж╛ржжрж╛ржо',
            'slug': 'peanuts',
            'description': 'рждрж╛ржЬрж╛ ржнрж╛ржЬрж╛ ржЪрж┐ржирж╛ ржмрж╛ржжрж╛ржо, ржкрзНрж░рзЛржЯрж┐ржи ржПржмржВ рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░ ржлрзНржпрж╛ржЯ рж╕ржорзГржжрзНржзред рж╕рзНржирзНржпрж╛ржХрж╕ рж╣рж┐рж╕рзЗржмрзЗ ржЬржиржкрзНрж░рж┐ржпрж╝ред',
            'price': 300.00,
            'discount_price': 249.00,
            'category_slug': 'nuts',
            'stock': 120,
            'short_description': 'рждрж╛ржЬрж╛ ржнрж╛ржЬрж╛ ржЪрж┐ржирж╛ ржмрж╛ржжрж╛ржо',
            'features': 'ржкрзНрж░рзЛржЯрж┐ржи рж╕ржорзГржжрзНржз\nрж╕рж╕рзНрждрж╛ржпрж╝ ржкрзБрж╖рзНржЯрж┐\nржПржирж╛рж░рзНржЬрж┐ ржмрзБрж╕рзНржЯрж╛рж░\nрж╕рзНржирзНржпрж╛ржХрж╕ рж╣рж┐рж╕рзЗржмрзЗ ржЖржжрж░рзНрж╢',
            'brand': 'рж▓рзЛржХрж╛рж▓ ржлрж╛рж░рзНржорж╕',
            'weight': 'рзлрзжрзж ржЧрзНрж░рж╛ржо',
        },
        {
            'name': 'рж╣рж▓рзБржж ржЧрзБржБржбрж╝рж╛',
            'slug': 'turmeric-powder',
            'description': 'рж╢рзБржжрзНржз рж╣рж▓рзБржж ржЧрзБржБржбрж╝рж╛, рж░рж╛ржирзНржирж╛ ржПржмржВ ржЖржпрж╝рзБрж░рзНржмрзЗржжрж┐ржХ ржФрж╖ржзрж┐ рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рж╛рж░рзНржпред ржЕрзНржпрж╛ржирзНржЯрж┐-ржЗржиржлрзНрж▓рзЗржорзЗржЯрж░рж┐ ржЧрзБржгрж╛ржмрж▓рзА рж╕ржорзНржкржирзНржиред',
            'price': 200.00,
            'discount_price': 179.00,
            'category_slug': 'spices',
            'stock': 80,
            'short_description': 'рж╢рзБржжрзНржз рж╣рж▓рзБржж ржЧрзБржБржбрж╝рж╛',
            'features': 'ржЕрзНржпрж╛ржирзНржЯрж┐-ржЗржиржлрзНрж▓рзЗржорзЗржЯрж░рж┐\nржкрзНрж░рж╛ржХрзГрждрж┐ржХ ржЕрзНржпрж╛ржирзНржЯрж┐рж╕рзЗржкржЯрж┐ржХ\nрж╣ржЬржорзЗ рж╕рж╛рж╣рж╛ржпрзНржпржХрж╛рж░рзА\nрззрзжрзж% рж╢рзБржжрзНржз',
            'brand': 'ржкрзБрж░рж╛ржи ржврж╛ржХрж╛ ржорж╕рж▓рж╛',
            'weight': 'рззрзжрзж ржЧрзНрж░рж╛ржо',
        },
        {
            'name': 'ржжрж╛рж░ржЪрж┐ржирж┐',
            'slug': 'cinnamon',
            'description': 'ржЙржЪрзНржЪржорж╛ржирзЗрж░ ржжрж╛рж░ржЪрж┐ржирж┐, рж╕рзБржЧржирзНржзрж┐ ржПржмржВ ржФрж╖ржзрж┐ ржЧрзБржгрж╛ржмрж▓рзА рж╕ржорзНржкржирзНржиред ржмрзНрж▓рж╛ржб рж╕рзБржЧрж╛рж░ ржирж┐ржпрж╝ржирзНрждрзНрж░ржгрзЗ рж╕рж╣рж╛ржпрж╝ржХред',
            'price': 180.00,
            'discount_price': 149.00,
            'category_slug': 'spices',
            'stock': 45,
            'short_description': 'ржЙржЪрзНржЪржорж╛ржирзЗрж░ ржжрж╛рж░ржЪрж┐ржирж┐',
            'features': 'ржмрзНрж▓рж╛ржб рж╕рзБржЧрж╛рж░ ржХржирзНржЯрзНрж░рзЛрж▓\nржЕрзНржпрж╛ржирзНржЯрж┐ржЕржХрзНрж╕рж┐ржбрзЗржирзНржЯ рж╕ржорзГржжрзНржз\nрж╕рзБржЧржирзНржзрж┐\nржкрзНрж░рж╛ржХрзГрждрж┐ржХ ржкрзНрж░рж┐ржЬрж╛рж░ржнрзЗржЯрж┐ржн',
            'brand': 'рж╕рзНржкрж╛ржЗрж╕ ржХрж┐ржВ',
            'weight': 'рзлрзж ржЧрзНрж░рж╛ржо',
        },
        {
            'name': 'ржЧрзНрж░рж┐ржи ржЯрж┐',
            'slug': 'green-tea',
            'description': 'ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржХрзЛржпрж╝рж╛рж▓рж┐ржЯрж┐ ржЧрзНрж░рж┐ржи ржЯрж┐, ржорзЗржЯрж╛ржмрж▓рж┐ржЬржо ржмрзБрж╕рзНржЯрж╛рж░ ржПржмржВ ржУржЬржи ржХржорж╛ржирзЛрж░ ржЬржирзНржп ржХрж╛рж░рзНржпржХрж░рзАред',
            'price': 350.00,
            'discount_price': 299.00,
            'category_slug': 'tea-coffee',
            'stock': 90,
            'short_description': 'ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржЧрзНрж░рж┐ржи ржЯрж┐',
            'features': 'ржорзЗржЯрж╛ржмрж▓рж┐ржЬржо ржмрзБрж╕рзНржЯрж╛рж░\nржЕрзНржпрж╛ржирзНржЯрж┐ржЕржХрзНрж╕рж┐ржбрзЗржирзНржЯ рж╕ржорзГржжрзНржз\nржУржЬржи ржХржирзНржЯрзНрж░рзЛрж▓\nржПржирж╛рж░рзНржЬрж┐ ржмрзБрж╕рзНржЯрж╛рж░',
            'brand': 'ржЯрж┐ ржЧрж╛рж░рзНржбрзЗржи',
            'weight': 'рззрзжрзж ржЧрзНрж░рж╛ржо',
        }
    ]

    created_count = 0
    updated_count = 0

    for product_data in products_data:
        try:
            category = Category.objects.get(slug=product_data['category_slug'])
            
            # Remove category_slug from product data
            category_slug = product_data.pop('category_slug')
            
            product, created = Product.objects.update_or_create(
                slug=product_data['slug'],
                defaults={
                    **product_data,
                    'category': category,
                    'is_active': True
                }
            )
            
            if created:
                print(f'тЬЕ Created: {product.name}')
                created_count += 1
            else:
                print(f'ЁЯФД Updated: {product.name}')
                updated_count += 1
                
        except Category.DoesNotExist:
            print(f'тЭМ Category not found: {product_data["category_slug"]}')
        except Exception as e:
            print(f'тЭМ Error inserting {product_data["name"]}: {str(e)}')

    print(f'\nЁЯОЙ Data insertion completed!')
    print(f'ЁЯУж Created: {created_count} products')
    print(f'тЬПя╕П Updated: {updated_count} products')

if __name__ == '__main__':
    print('ЁЯЪА Starting Bengali product data insertion...\n')
    
    # First create categories
    print('ЁЯУБ Creating categories...')
    create_categories()
    
    print('\nЁЯУж Inserting products...')
    insert_bangla_products()
    
    print('\nтЬЕ All done!')